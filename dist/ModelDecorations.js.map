{"version":3,"sources":["ModelDecorations.ts"],"names":[],"mappings":";AACA,QAAO,kBAEP,CAAC,CAFwB;AAEzB,IAAY,CAAC,WAAM,QACnB,CAAC,CAD0B;AAC3B,IAAY,GAAG,WAAM,OAErB,CAAC,CAF2B;AAE5B,wBAAsB,WACtB,CAAC,CADgC;AAGjC,IAAM,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC,kBAAkB,CAAC,CAAA;AAG1C,IAAI,mBAAmB,GAAiB;IACvC,eAAe,EAAE,CAAC;IAClB,cAAc,EAAE,EAAE;CAClB,CAAA;AAGD,gCAAuC,eAA6B;IACnE,mBAAmB,GAAG,eAAe,CAAA;AACtC,CAAC;AAFe,8BAAsB,yBAErC,CAAA;AAED;;;;;;;GAOG;AACH,yBAAgC,IAAkB;IACjD,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC;QAI5B,MAAM,CAAC,UAAS,WAAoB;YACnC,gCAAgC;YAChC,CAAC,CAAC,QAAQ,CAAC,IAAI,EAAC,mBAAmB,EAAC;gBACnC,SAAS,EAAG,WAAmB,CAAC,IAAI;aACpC,CAAC,CAAA;YAGF,GAAG,CAAC,KAAK,CAAC,cAAc,EAAE,IAAI,CAAC,SAAS,CAAC,CAAA;YACzC,iBAAO,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,EAAC,WAAW,EAAC,IAAqB,CAAC,CAAA;QACxE,CAAC,CAAA;IAEF,CAAC;AACF,CAAC;AAjBe,uBAAe,kBAiB9B,CAAA;AAID,6BAAoC,IAAuB;IAE1D,MAAM,CAAC,UAAU,MAAU,EAAC,WAAkB;QAC7C,iBAAO,CAAC,iBAAiB,CAAC,MAAM,EAAC,WAAW,EAAC,IAAI,CAAC,CAAA;IACnD,CAAC,CAAA;AAGF,CAAC;AAPe,2BAAmB,sBAOlC,CAAA","file":"ModelDecorations.js","sourcesContent":["\nimport 'reflect-metadata'\n\nimport * as _ from 'lodash'\nimport * as Log from './log'\n\nimport {Manager} from './Manager'\nimport {ITableOptions,IModelOptions,IAttributeOptions} from './Types'\n\nconst log = Log.create('ModelDecorations')\n\n\nlet defaultTableOptions:ITableOptions = {\n\twriteThroughput: 5,\n\treadThroughput: 10\n}\n\n\nexport function setDefaultTableOptions(newTableOptions:ITableOptions) {\n\tdefaultTableOptions = newTableOptions\n}\n\n/**\n * Decorate a specified class, making it a\n * PersistableModel\n *\n * Set process.env.DYNO_SKIP to true in order to skip\n * decorations - useful in dual purpose classes,\n * in webpack use DefinePlugin\n */\nexport function ModelDescriptor(opts:IModelOptions) {\n\tif (!process.env.DYNO_SKIP) {\n\n\n\n\t\treturn function(constructor:Function) {\n\t\t\t// Make sure everything is valid\n\t\t\t_.defaults(opts,defaultTableOptions,{\n\t\t\t\tclazzName: (constructor as any).name\n\t\t\t})\n\n\n\t\t\tlog.debug('Decorating: ', opts.clazzName)\n\t\t\tManager.registerModel(opts.clazzName,constructor,opts as IModelOptions)\n\t\t}\n\n\t}\n}\n\n\n\nexport function AttributeDescriptor(opts: IAttributeOptions) {\n\n\treturn function (target:any,propertyKey:string) {\n\t\tManager.registerAttribute(target,propertyKey,opts)\n\t}\n\n\n}\n\n\n\n\n\n"],"sourceRoot":"/Users/jglanz/Development/dynotype/src"}